<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dependency injection :: Springboot-Showcase // Docs</title>
    <link rel="prev" href="cache.html">
    <link rel="next" href="validation.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Springboot-Showcase // Docs</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">

    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="springboot-showcase" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../index.html">Springboot Showcase</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Index</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Example guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Clients</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../clients/fluent-client.html">Fluent API client</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../clients/openfeign.html">OpenFeign</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sample applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sample-applications/kafka.html">Kafka</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sample-applications/web-mvc.html">Web MVC</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spring Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="aop.html">AOP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cache.html">Cache</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="dependency-injection.html">Dependency injection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="validation.html">Validation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spring Data JPA</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-data-jpa/repository-extension.html">Repository extension</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spring MVC</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../spring-mvc/api-versioning.html">API versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../testing/testing.html">Testing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ways of working</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanation guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../ways-of-working/explanation/architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../ways-of-working/explanation/fluent_rest_api_client.html">Fluent REST API client</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How-to guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../ways-of-working/how-to/mocking_an_external_service.html">Mocking an external client</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spring guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How-to guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/how-to/actuators.html">Actuators</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/how-to/aop.html">AOP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/how-to/dependency-injection.html">Dependency injection</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/how-to/observability.html">Observability</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/how-to/testing.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/reference/properties_load_precedence.html">Properties load precedence</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../spring-docs/reference/spring_data.html">Spring Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../spring-docs/tutorial/index.html">Tutorials</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">JUnit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/how-to/junit/parameterized-tests.html">Parameterized tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Springboot Showcase</a></li>
    <li>Example guides</li>
    <li>Spring Core</li>
    <li><a href="dependency-injection.html">Dependency injection</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Dependency injection</h1>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#multiple-optional-beans">Multiple beans of the same type</a></p>
</li>
<li>
<p><a href="#multiple-optional-beans">Optional beans</a></p>
</li>
<li>
<p><a href="#prototype-scoped-beans">Prototype scoped beans injection</a></p>
</li>
<li>
<p><a href="#prototype-scoped-beans">Parameterized prototype bean factories</a></p>
</li>
<li>
<p><a href="#multiple-optional-beans">Profile dependant beans</a></p>
</li>
<li>
<p><a href="#multiple-optional-beans">Use Spring profiles in tests</a></p>
</li>
<li>
<p><a href="#factory-bean">Factory bean</a></p>
</li>
<li>
<p>Test soft assertions using <strong>AssertJ</strong> library</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="relevant-code-in-this-example"><a class="anchor" href="#relevant-code-in-this-example"></a>Relevant code in this example</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to be less verbose, the package common part is omitted when a class name is specified (<code>com.bitsmi.springbootshowcase.springcore.dependencyinjection</code>).</p>
</div>
<div class="paragraph">
<p>E.G:</p>
</div>
<div class="paragraph">
<p><code>product.service.ProductService</code> corresponds to <code>com.bitsmi.springbootshowcase.springcore.dependencyinjection.product.service.ProductService</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="multiple-optional-beans"><a class="anchor" href="#multiple-optional-beans"></a>Multiple &amp; Optional beans</h3>
<div class="ulist">
<ul>
<li>
<p><code>product.service.ProductService</code></p>
<div class="paragraph">
<p>Interface shared by the multiple implementation beans</p>
</div>
</li>
<li>
<p><code>product.service.impl.MainProductServiceImpl</code></p>
<div class="paragraph">
<p>Primary bean implementation that will be autowired in single injections points when no <code>@Qualifier</code>
is specified</p>
</div>
</li>
<li>
<p><code>product.service.impl.AdditionalProductServiceImpl</code> &amp; <code>product.service.impl.AlternativeProductServiceImpl</code></p>
<div class="paragraph">
<p>Qualified bean implementations. They can be selected individually for injection using their <code>@Qualifier</code></p>
</div>
</li>
<li>
<p><code>product.service.impl.OptionalProfileProductServiceImpl</code></p>
<div class="paragraph">
<p>Bean attached to a profile. It will be only available when the specified profile is active</p>
</div>
</li>
</ul>
</div>
<div id="product-services-int-tests" class="ulist">
<ul>
<li>
<p><code>test.product.service.ProductServicesIntTests</code> (Integration test)</p>
<div class="paragraph">
<p>Shows how to autowire beans using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multiple injection point of all bean candidates for a specific type using Java&#8217;s <code>Collection</code></p>
</li>
<li>
<p><code>@Autowired(required = false)</code> annotation for optional single injection point</p>
</li>
<li>
<p>Optional single injection point using <code>ObjectProvider</code></p>
</li>
<li>
<p>Optional single injection point using Java&#8217;s <code>Optional</code></p>
</li>
<li>
<p>Injection of a <code>@Primary</code> bean when multiple beans for the same type are present</p>
</li>
<li>
<p>Injection of qualified beans when multiple beans for the same type are present</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>test.product.service.impl.ProfileServicesOptionalProfileIntTests</code> (Integration test)</p>
<div class="paragraph">
<p>Similar to <a href="#product-services-int-tests">ProductServicesIntTests</a> but including the definition of a <strong>Spring profile</strong> that enables an additional bean (<code>service.impl.OptionalProfileProductServiceImpl</code>)</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="prototype-scoped-beans"><a class="anchor" href="#prototype-scoped-beans"></a>Prototype scoped beans</h3>
<div class="ulist">
<ul>
<li>
<p><code>scoped.service.PrototypeService</code></p>
<div class="paragraph">
<p>Simple interface to designate a type to retrieve <code>SimplePrototypeServiceImpl</code> instances from <strong>Spring Context</strong></p>
</div>
</li>
<li>
<p><code>scoped.service.ParameterizedService</code></p>
<div class="paragraph">
<p>Simple interface to designate a type to retrieve <code>ParameterizedServiceImpl</code> instances from <strong>Spring Context</strong></p>
</div>
</li>
<li>
<p><code>scoped.service.impl.SimplePrototypeServiceImpl</code></p>
<div class="paragraph">
<p>Simple implementation for a <strong>prototype scoped service</strong>. The main point in this is class is the usage
of <code>@Scope(BeanDefinition.SCOPE_PROTOTYPE)</code> along with <code>@Service</code> to include the bean in this scope</p>
</div>
</li>
<li>
<p><code>scoped.service.impl.ParameterizedServiceImpl</code></p>
<div class="paragraph">
<p>Parameterized service implementation that receives parameters at construction time.
It will be used to demonstrate how to produce parameterized prototype beans at runtime.</p>
</div>
<div class="paragraph">
<p>It has no <code>@Service</code> annotation as its instance as a bean is done through a <code>ObjectProvider</code> / <a href="#parameterized-service-prototype-factory">Factory</a>.</p>
</div>
</li>
</ul>
</div>
<div id="parameterized-service-prototype-factory" class="ulist">
<ul>
<li>
<p><code>scoped.service.ParameterizedServicePrototypeFactory</code></p>
<div class="paragraph">
<p>Example of usage of <code>@Configuration</code> annotation to create a <strong>Factory</strong> that allow us to retrieve
parameterized instances of a <strong>prototype bean</strong> defined in a <strong>bean factory method</strong> annotated with <code>@Bean</code> and <code>@Scope(BeanDefinition.SCOPE_PROTOTYPE)</code></p>
</div>
</li>
<li>
<p><code>test.scoped.service.PrototypeServicesIntTests</code> (Integration test)</p>
<div class="paragraph">
<p>Shows how to retrieve prototype beans using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Direct injection</p>
</li>
<li>
<p>The injection of an <code>ObjectProvider</code></p>
</li>
<li>
<p>Using <code>ApplicationContext.getBean()</code> method</p>
</li>
<li>
<p>Through a <a href="#parameterized-service-prototype-factory">custom factory class</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="factory-bean"><a class="anchor" href="#factory-bean"></a>FactoryBean</h3>
<div class="ulist">
<ul>
<li>
<p><code>factorybean.config.FactoryBeanConfig</code></p>
<div class="paragraph">
<p>Configuration of the <code>FactoryBean</code></p>
</div>
</li>
<li>
<p><code>factorybean.service.impl.ComplexServiceFactoryBean</code></p>
<div class="paragraph">
<p><code>FactoryBean</code> implementation that creates sample service instances</p>
</div>
</li>
<li>
<p><code>factorybean.service.ComplexService</code> and <code>factorybean.service.impl.ComplexServiceImpl</code></p>
<div class="paragraph">
<p>Sample service definition and implementation. It has dependencies and configuration value methods
that can be specified by the factory at creation time</p>
</div>
</li>
<li>
<p><code>test.factorybean.service.ComplexServiceFactoryBeanTests</code></p>
<div class="paragraph">
<p>Shows how to retrieve service instances using <code>@Autowired</code> fields and <code>ApplicationContext::getBean</code> method</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-documentation"><a class="anchor" href="#related-documentation"></a>Related documentation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../spring-docs/how-to/dependency-injection.html" class="xref page">Dependency Injection how-to</a></p>
</li>
<li>
<p>Spring Testing [ <mark>TODO</mark> ]</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="cache.html">Cache</a></span>
  <span class="next"><a href="validation.html">Validation</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
